local Fluent = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()
local SaveManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/dawid-scripts/Fluent/master/Addons/SaveManager.lua"))()
local InterfaceManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/dawid-scripts/Fluent/master/Addons/InterfaceManager.lua"))()

-- Create the window
local Window = Fluent:Window({
    Name = "Ornament Reroller",
    Theme = "Dark",
    Size = UDim2.new(0, 400, 0, 300)
})

-- Add a tab
local Tab = Window:AddTab({ Title = "Auto Roll" })

-- List of ornaments
local ornaments = {
    { Id = 410004, Name = "Fire Man Mask" }, 
    { Id = 410005, Name = "Tengu Mask" },
    { Id = 410050, Name = "Red Horn" },
    { Id = 410051, Name = "Six-Eye Violet" },
    { Id = 410052, Name = "Fox Tears" },
}

-- Table to track toggled ornaments by name
local selectedOrnaments = {}

-- Add a toggle for each ornament using its name
for _, ornament in ipairs(ornaments) do
    Tab:AddToggle({
        Title = ornament.Name,
        Default = false,
        Callback = function(state)
            selectedOrnaments[ornament.Name] = state
        end
    })
end

-- Toggle to start/stop auto-rolling
local rolling = false
Tab:AddToggle({
    Title = "Enable Auto Roll",
    Default = false,
    Callback = function(state)
        rolling = state
        if rolling then
            spawn(function()
                while rolling do
                    local args = { 400001 } -- ID used for rolling
                    local result = game:GetService("ReplicatedStorage")
                        :WaitForChild("Remotes")
                        :WaitForChild("RerollOrnament")
                        :InvokeServer(unpack(args))
                    
                    -- Find ornament name from rolled ID
                    local rolledName = "Unknown"
                    for _, ornament in ipairs(ornaments) do
                        if ornament.Id == result.ornamentId then
                            rolledName = ornament.Name
                            break
                        end
                    end
                    
                    print("Ornament rolled:", rolledName)
                    
                    -- Stop if rolled ornament name is toggled
                    if selectedOrnaments[rolledName] then
                        print("Target ornament rolled! Stopping...")
                        rolling = false
                        break
                    end
                    
                    wait(0.1) -- optional small delay
                end
            end)
        end
    end
})
